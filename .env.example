# ============================================
# Official Report Configuration
# ============================================
# This file controls all customizable content in the official report
# 이 파일을 .env로 복사하여 사용하세요: cp .env.example .env

# -----------------------
# Basic Report Settings
# -----------------------
ORGANIZATION="한국수자원공사"
AUTHOR_NAME="기술운영팀"
REPORT_DATE=""  # 비워두면 오늘 날짜 자동 설정
REPORT_VERSION="1.0"
OUTPUT_DIR="./reports"
KUBECTL_TIMEOUT=5
ENABLE_GPU_MONITORING=true

# PDF 변환 설정
ENABLE_PDF_CONVERT=false           # true로 설정하면 HTML 생성 후 자동 PDF 변환 실행
PDF_BUILD_MODE="online"            # online|offline (offline은 사전 빌드된 Docker 이미지 필요)
PDF_DOCKER_IMAGE="k8s-report-pdf:latest"  # PDF 변환용 Docker 이미지 태그

# 점검 확인 정보 (커버 페이지)
INSPECTOR_NAME=""  # 작성자 이름
INSPECTOR_DEPT=""  # 작성자 소속
MANAGER_NAME=""    # 담당자 이름
MANAGER_DEPT="디지털관리처"    # 담당자 소속

# -----------------------
# Executive Summary (1. 보고서 요약)
# -----------------------
# Overall system status summary
EXECUTIVE_SUMMARY_STATUS="전체 시스템은 정상 운영 중이며 주요 서비스 장애 없음"

# Total issue count and severity classification
EXECUTIVE_SUMMARY_ISSUE_COUNT="총 5건의 이슈 발견"
EXECUTIVE_SUMMARY_SEVERITY_BREAKDOWN="Critical 1건, Major 2건, Minor 2건"

# Key risk factors (1-2 critical items to highlight)
EXECUTIVE_SUMMARY_KEY_RISK_1="Harbor 레지스트리 디스크 사용률 85% 도달, 임계치 근접"
EXECUTIVE_SUMMARY_KEY_RISK_2="일부 노드에서 메모리 사용률 80% 초과, 용량 확장 검토 필요"

# -----------------------
# Check Items Configuration (점검 항목 설정)
# Format: SEVERITY (Critical/Major/Minor), STATUS (Completed/In Progress/Planned/N/A)
# -----------------------

# Check 1: Node Status (노드 상태)
CHECK_NODES_SEVERITY="Critical"
CHECK_NODES_STATUS="Completed"

# Check 2: Pod Status (파드 상태)
CHECK_PODS_SEVERITY="Major"
CHECK_PODS_STATUS="Completed"

# Check 3: Deployment Status (디플로이먼트 상태)
CHECK_DEPLOYMENTS_SEVERITY="Major"
CHECK_DEPLOYMENTS_STATUS="Completed"

# Check 4: Service Endpoints (서비스 엔드포인트)
CHECK_SERVICES_SEVERITY="Major"
CHECK_SERVICES_STATUS="Completed"

# Check 5: Storage Status (스토리지 PV/PVC)
CHECK_STORAGE_SEVERITY="Critical"
CHECK_STORAGE_STATUS="Completed"

# Check 6: Ingress Backends (Ingress 백엔드)
CHECK_INGRESS_SEVERITY="Major"
CHECK_INGRESS_STATUS="Completed"

# Check 7: URL Connectivity (URL 연결성)
CHECK_URL_CHECK_SEVERITY="Minor"
CHECK_URL_CHECK_STATUS="Completed"

# Check 8: Rook-Ceph Health (Rook-Ceph 클러스터)
CHECK_ROOK_CEPH_SEVERITY="Critical"
CHECK_ROOK_CEPH_STATUS="Completed"

# Check 9: Harbor Disk Usage (Harbor 디스크 사용량)
CHECK_HARBOR_DISK_SEVERITY="Major"
CHECK_HARBOR_DISK_STATUS="In Progress"

# Check 10: Minio Disk Usage (Minio 디스크 사용량)
CHECK_MINIO_DISK_SEVERITY="Minor"
CHECK_MINIO_DISK_STATUS="Completed"

# -----------------------
# Operator Comments (담당자 의견)
# 각 점검 항목에 대한 담당자 의견을 입력합니다.
# 비워두면 HTML 보고서에서 직접 편집 가능한 셀로 표시됩니다.
# -----------------------
CHECK_NODES_COMMENT=""
CHECK_PODS_COMMENT=""
CHECK_DEPLOYMENTS_COMMENT=""
CHECK_SERVICES_COMMENT=""
CHECK_STORAGE_COMMENT=""
CHECK_INGRESS_COMMENT=""
CHECK_URL_CHECK_COMMENT=""
CHECK_ROOK_CEPH_COMMENT=""
CHECK_HARBOR_DISK_COMMENT=""
CHECK_MINIO_DISK_COMMENT=""

# -----------------------
# Issue Details Configuration (이슈 상세 설정)
# For each check that has issues (WARNING/FAILED), configure:
# - Action Status (조치 상태)
# - Root Cause (발생 원인)
# - Prevention Measures (재발 방지 대책)
# -----------------------

# Issue 1: Node Status Issues
ISSUE_NODES_ACTION_STATUS="완료"
ISSUE_NODES_ROOT_CAUSE="kubelet 서비스 재시작 필요, 네트워크 일시적 불안정"
ISSUE_NODES_PREVENTION="노드 상태 모니터링 강화, kubelet 자동 재시작 스크립트 적용, 네트워크 장애 탐지 시스템 구축"

# Issue 2: Pod Status Issues
ISSUE_PODS_ACTION_STATUS="대기"
ISSUE_PODS_ROOT_CAUSE="리소스 부족으로 인한 Pending 상태, 이미지 pull 실패"
ISSUE_PODS_PREVENTION="리소스 쿼터 검토 및 확대, 이미지 레지스트리 접근성 개선, Pod Disruption Budget 설정"

# Issue 3: Deployment Status Issues
ISSUE_DEPLOYMENTS_ACTION_STATUS="원인 분석 중"
ISSUE_DEPLOYMENTS_ROOT_CAUSE="Rolling Update 중 헬스체크 실패, 리소스 제한 초과"
ISSUE_DEPLOYMENTS_PREVENTION="헬스체크 파라미터 조정, 리소스 요청/제한 값 재설정, Readiness/Liveness Probe 개선"

# Issue 4: Service Endpoint Issues
ISSUE_SERVICES_ACTION_STATUS="완료"
ISSUE_SERVICES_ROOT_CAUSE="파드 셀렉터 불일치, 파드가 Not Ready 상태"
ISSUE_SERVICES_PREVENTION="셀렉터 자동 검증 스크립트 도입, 파드 상태 지속 모니터링"

# Issue 5: Storage Status Issues
ISSUE_STORAGE_ACTION_STATUS="미완료"
ISSUE_STORAGE_ROOT_CAUSE="스토리지 클래스 프로비저너 오류, PV 용량 부족"
ISSUE_STORAGE_PREVENTION="동적 프로비저닝 설정 검토, 스토리지 용량 확장, 백업 스토리지 클래스 구성"

# Issue 6: Ingress Backend Issues
ISSUE_INGRESS_ACTION_STATUS="완료"
ISSUE_INGRESS_ROOT_CAUSE="Ingress Controller 버전 호환성 문제, TLS 인증서 만료"
ISSUE_INGRESS_PREVENTION="Ingress Controller 업데이트 정책 수립, 인증서 만료 자동 알림 설정"

# Issue 7: URL Connectivity Issues
ISSUE_URL_CHECK_ACTION_STATUS="대기"
ISSUE_URL_CHECK_ROOT_CAUSE="외부 DNS 해석 실패, 방화벽 규칙 차단"
ISSUE_URL_CHECK_PREVENTION="DNS 서버 이중화, 방화벽 규칙 정기 검토"

# Issue 8: Rook-Ceph Health Issues
ISSUE_ROOK_CEPH_ACTION_STATUS="원인 분석 중"
ISSUE_ROOK_CEPH_ROOT_CAUSE="OSD 디스크 장애, Mon 쿼럼 불일치"
ISSUE_ROOK_CEPH_PREVENTION="Ceph OSD 상태 지속 모니터링, 디스크 교체 정책 수립, Mon 배치 전략 개선"

# Issue 9: Harbor Disk Usage Issues
ISSUE_HARBOR_DISK_ACTION_STATUS="미완료"
ISSUE_HARBOR_DISK_ROOT_CAUSE="이미지 정리 정책 미적용, 불필요한 태그 누적"
ISSUE_HARBOR_DISK_PREVENTION="이미지 라이프사이클 정책 설정, 정기 이미지 정리 작업 자동화, 디스크 용량 확장"

# Issue 10: Minio Disk Usage Issues
ISSUE_MINIO_DISK_ACTION_STATUS="완료"
ISSUE_MINIO_DISK_ROOT_CAUSE="오래된 백업 데이터 미삭제, 임시 파일 축적"
ISSUE_MINIO_DISK_PREVENTION="데이터 보관 주기 정책 수립, 임시 파일 자동 정리 스크립트 적용, 디스크 사용률 알림 설정"

# -----------------------
# Kubernetes Cluster Overrides
# (Leave empty to auto-detect)
# -----------------------
K8S_VERSION=""
CNI_TYPE=""  # "Cilium", "Calico", "Flannel" 등
GPU_OPERATOR_STATUS=""  # "설치됨" 또는 "미설치"

# -----------------------
# Runway Platform Overrides
# (Leave empty to auto-detect)
# -----------------------
RUNWAY_VERSION=""
RUNWAY_INSTALLED=""  # "설치됨" 또는 "미설치"

# -----------------------
# Final Conclusion Section (6. 최종 결론)
# -----------------------
FINAL_CONCLUSION="본 점검 결과 전반적인 시스템 운영 상태는 양호하나, Harbor 디스크 사용률 증가 추세에 대한 모니터링 강화가 필요합니다. 발견된 이슈에 대해서는 우선순위에 따라 조치를 완료하였으며, 재발 방지를 위한 자동화 및 모니터링 체계를 구축할 예정입니다. 향후 3개월 주기로 정기 점검을 수행하여 시스템 안정성을 지속적으로 유지하겠습니다."
