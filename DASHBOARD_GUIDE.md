# 🚀 Kubernetes 실시간 터미널 대시보드

터미널에서 Kubernetes 클러스터 상태를 실시간으로 모니터링할 수 있는 대시보드입니다.

## 📺 미리보기

```
╔══════════════════════════════════════════════════════════════════════════════════════╗
║                       🚀 Kubernetes 클러스터 실시간 대시보드                        ║
╠══════════════════════════════════════════════════════════════════════════════════════╣
║ ⏰ 2025-08-21 15:30:45                                                          ║
║ 🌐 클러스터: https://192.168.135.102:6443                                      ║
╚══════════════════════════════════════════════════════════════════════════════════════╝

🖥️  노드 상태
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  [OK] master1 - Ready
  [OK] worker1 - Ready
  [OK] worker2 - Ready

  📊 총 노드: 3개

📦 파드 상태
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  [RUN] Running: 85개
  [PEND] Pending: 2개
  [FAIL] Failed: 0개

  📊 전체 파드: 87개 | 실행 중: 85개
  🎯 성공률: [##################--] 97%

💿 Rook-Ceph 클러스터
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  [OK] Ceph 클러스터: 정상 (HEALTH_OK)

💾 스토리지 디스크 사용량
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  [HARBOR] Registry:
    [######--------------] 30% (2.1G/7.0G)
  [MINIO] Storage:
    [####----------------] 20% (3.8M/20G)

🏷️  네임스페이스별 리소스
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
  kube-system:        [####################] 100% (15/15)
  harbor:             [####################] 100% (8/8)
  rook-ceph:          [####################] 100% (12/12)
  monitoring:         [####################] 100% (6/6)
  minio:              [####################] 100% (1/1)
```

## 🛠️ 사용법

### 기본 실행 (한 번만 실행)
```bash
./dashboard.sh

# 또는
./dashboard.sh --once
```

### 실시간 모드 (30초마다 자동 새로고침)
```bash
./dashboard.sh --watch

# 또는
./dashboard.sh -w
```

### 도움말
```bash
./dashboard.sh --help
```

## 🎯 주요 기능

### 📊 실시간 모니터링 항목
- **노드 상태**: 전체 노드의 Ready 상태 실시간 확인
- **파드 상태**: 네임스페이스별 파드 상태 통계 및 성공률
- **Rook-Ceph**: Ceph 클러스터 헬스 상태 모니터링
- **스토리지 사용량**: Harbor/Minio 디스크 사용률 진행률 바
- **네임스페이스 요약**: 상위 10개 네임스페이스별 리소스 현황
- **최근 이벤트**: 최근 10분간 발생한 Kubernetes 이벤트

### 🎨 시각적 요소
- **진행률 바**: 20칸 유니코드 진행률 바 (█░)
- **색상 코딩**:
  - 🟢 녹색: 정상 (0-50%)
  - 🟡 노란색: 주의 (50-80%) 
  - 🔴 빨간색: 위험 (80%+)
- **아이콘**: 각 상태별 직관적인 이모지 아이콘
- **테두리**: 유니코드 박스 드로잉으로 깔끔한 레이아웃

## 🔧 기술적 특징

### 성능 최적화
- **경량 설계**: 최소한의 리소스 사용으로 빠른 응답
- **비동기 처리**: kubectl 명령어들을 효율적으로 처리
- **에러 처리**: 각 컴포넌트별 개별 에러 처리로 안정성 보장

### 호환성
- **터미널 지원**: 모든 ANSI 색상 지원 터미널에서 동작
- **UTF-8 필요**: 유니코드 문자 표시를 위해 UTF-8 환경 필요
- **kubectl 의존성**: 클러스터 접근을 위한 kubectl 필수

## 💡 사용 시나리오

### 🖥️ 운영 모니터링
```bash
# 실시간 대시보드로 24/7 모니터링
./dashboard.sh --watch
```

### 🔍 빠른 상태 확인
```bash
# 현재 상태만 빠르게 확인
./dashboard.sh --once
```

### 📊 정기 점검
```bash
# cron으로 정기 점검 후 로그 저장
./dashboard.sh --once >> daily_check.log
```

## 🎛️ 고급 활용

### 원격 클러스터 모니터링
```bash
# kubeconfig 지정해서 다른 클러스터 모니터링
export KUBECONFIG=/path/to/other/cluster/config
./dashboard.sh --watch
```

### 특정 네임스페이스 필터링
대시보드 스크립트는 전체 클러스터 상태를 보여주지만, 특정 네임스페이스만 관심 있다면 kubectl 명령어와 함께 사용:

```bash
# 특정 네임스페이스 파드 상태 확인
watch kubectl get pods -n production

# 대시보드와 함께 멀티 터미널 사용
tmux new-session -d './dashboard.sh --watch'
```

### 알림 연동
```bash
#!/bin/bash
# 클러스터 상태 알림 스크립트 예시
status=$(./dashboard.sh --once | grep -c "❌\|⚠️")
if [[ $status -gt 0 ]]; then
    # 슬랙, 이메일 등으로 알림 전송
    echo "클러스터에 문제가 발견되었습니다!" | mail -s "K8s Alert" admin@company.com
fi
```

## 🔄 업데이트 내역

### v1.0.0
- ✅ 기본 실시간 대시보드 기능
- ✅ 노드, 파드, 네임스페이스 모니터링
- ✅ Rook-Ceph, Harbor, Minio 스토리지 모니터링
- ✅ 색상 코딩 및 진행률 바 시각화
- ✅ 실시간/단발성 모드 지원

## 🐛 문제 해결

### 색상이 표시되지 않는 경우
```bash
# 터미널이 색상을 지원하는지 확인
echo $TERM

# 강제로 색상 활성화
export TERM=xterm-256color
```

### kubectl 접근 문제
```bash
# 클러스터 연결 확인
kubectl cluster-info

# 권한 확인
kubectl auth can-i get pods --all-namespaces
```

### UTF-8 문자 깨짐
```bash
# 로케일 설정 확인
locale

# UTF-8 환경 설정
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
```

---

**🎯 빠른 시작**: `./dashboard.sh --watch`로 실시간 모니터링을 바로 시작하세요!

**📊 상세 분석**: HTML 리포트가 필요하다면 `./k8s_health_check.sh --format html`을 사용하세요.